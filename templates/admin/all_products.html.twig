{% extends 'admin/layout.html.twig' %}
{% block title %}Tous les produits{% endblock title %}

{% block admin_content %}

    <div id="background" class="carousel slide carousel-fade background" data-ride="carousel">
        <div id="text" class="col-md-12 text-center"></div>
        <!-- div vide pour texte qui apparait avec chaque slide
        dans carousel -->

        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="{{ asset('img/46.jpg') }}" alt="First slide">
            </div>

            <div class="carousel-item">
                <div class="carousel-caption">
                    {# <h4>Breaking bread</h4>
                     <h3>Le bonheur de la pâtisserie</h3>
                     <p>Nulla a pharetra mollis interdum.a pharetra augue mollis interdum.<br>Lorem ipsum dolor sit amet,
                         consectetur adipisicing elit. Quidem, suscipit!</p>#}
                    <button class="btn btn-dark">Acheter</button>
                </div>

                <video class="video-fluid w-100" autoplay loop muted>
                    <source src="{{ asset('video/Macaron.mp4') }}" type="video/mp4"/>
                </video>

                <!--  <img class="d-block w-100" src="images/53.jpg" alt="Second slide"> -->
            </div>


            <div class="carousel-item">
                <div class="carousel-caption col-md-12 text-center">
                    {#<h4>Breaking bread</h4>
                    <h3>Des spécialités délicieuses</h3>
                    <p>Nulla libero, a pharetra augue mollis interdum. adipisicing <br>Lorem ipsum dolor sit amet, ci ab
                        lausa vit hm alias. consectetur adipisicing elit. Quidem, suscipit!</p>
                    <button class="btn btn-dark">Acheter</button>#}
                </div>
                <img class="d-block w-100" src="{{ asset('img/54.jpg') }}" alt="Third slide">
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleFade" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>



    <div class="container" id="main-admin-all-products">
        <h1 class="text-center">Produits</h1>


    {{ form_start(form) }}
    {{ form_row(form.search, {
            'label': false,
            'required': false,
            'attr': { 'placeholder': 'Rechercher' }
        }) }}
    {{ form_end(form) }}

    <table class="table table-hover">
        <thead class="thead-responsive">
            <tr class="row">
                <th class="col-md">Produit</th>
                <th class="col-md">Catégorie</th>
                <th class="col-md">Stock</th>
            </tr>
        </thead>
        {% if products is not empty %}
            {% for product in products %}
                <tr class="row tr-link" data-href="{{ path('admin_product-editor', {'id': product.id }) }}">
                    <td class="col-md">
                        <div class="row">
                            {% set thumb = product.images|first %}
                            <div class="col-md">
                                <img src="/img/upload/{{ thumb.name }}" alt="{{ thumb.description }}" class="img img-fluid">
                            </div>
                            <div class="col-md">
                                {{ product.name }}
                            </div>
                        </div>
                    </td>
                    <td class="col-md">{{ product.category }}</td>
                    <td class="col-md">{{ product.stock }}</td>
                </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td>Aucun résultat</td>
            </tr>
        {% endif %}
    </table>
    <nav class="mt-4">
        <ul class="pagination">
            {% if current_page == 1 %}
                <li class="page-item disabled">
                    <span class="page-link">Précédent</span>
                </li>
            {% else %}
                <a href="{{ path('admin_product-index', {'page': current_page - 1 }) }}" class="page-link">Précédent</a>
            {% endif %}

            {% for p in 1..total_pages %}
                {% if p == current_page %}
                    <li class="page-item active">
                        <a href="{{ path('admin_product-index', {'page': p }) }}" class="page-link">{{ p }}</a>
                    </li>
                {% else %}
                    <li class="page-item">
                        <a href="{{ path('admin_product-index', {'page': p }) }}" class="page-link">{{ p }}</a>
                    </li>
                {% endif %}
            {% endfor %}

            {% if current_page == total_pages %}
                <li class="page-item disabled">
                    <span class="page-link">Suivant</span>
                </li>
            {% else %}
                <a href="{{ path('admin_product-index', {'page': current_page + 1 }) }}" class="page-link">Suivant</a>
            {% endif %}
        </ul>
    </nav>
    </div>
{% endblock %}


